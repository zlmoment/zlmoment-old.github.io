<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>HTML5 之 WebSocket 通信协议介绍 | Hackecho</title>
  <meta name="author" content="Zhaoyu Li">
  
  <meta name="description" content="更新：Chrome和Firefox的WebSocket协议已更新到最新版，不再支持旧版协议。关于新版协议的介绍请看《WebSocket新版Hybi-10协议介绍》，本篇文章中的握手协议和数据报文已不再适用。
最近参与一个有关HTML5的比赛，要用到WebSocket，经过一些实验后简单总结一下Web">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="HTML5 之 WebSocket 通信协议介绍"/>
  <meta property="og:site_name" content="Hackecho"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Hackecho" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Hackecho</a></h1>
  <h2><a href="/">Blog by Zhaoyu Li</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-04-15T06:21:50.000Z"><a href="/2012/04/html5-websocket-communication-protocol/">Apr 15 2012</a></time>
      
      
  
    <h1 class="title">HTML5 之 WebSocket 通信协议介绍</h1>
  

    </header>
    <div class="entry">
      
        <p><strong>更新：Chrome和Firefox的WebSocket协议已更新到最新版，不再支持旧版协议。关于新版协议的介绍请看<a href="http://www.hackecho.com/" target="_blank">《WebSocket新版Hybi-10协议介绍》</a>，本篇文章中的握手协议和数据报文已不再适用。</strong></p>
<p>最近参与一个有关HTML5的比赛，要用到WebSocket，经过一些实验后简单总结一下WebSocket的基础用法。</p>
<p>WebSocket是HTML5的一种新的协议，它是实现了浏览器与服务器的双向通讯。</p>
<p>在 WebSocket API 中，浏览器和服务器只需要要做一个握手的动作，然后，浏览器和服务器之间就形成了一条快速通道。两者之间就直接可以数据互相传送。（这两小段介绍摘自维基百科）</p>
<h3 id="websocket-">WebSocket协议</h3>
<p>WebSocket的协议非常简单，这也是其最大的优点之一。</p>
<p>在客户端（如浏览器），可以利用JavaScript直接new WebSocket来实例化一个WebSocket对象，其参数格式为ws://yourdomain:port/path。WebSocket会根据这段字符串，发送Header到指定服务器端口，其数据格式大概如下：</p>
<pre><code>GET / HTTP/1.1
Origin: http://hackecho.com 
Cookie: __utma=99as
Connection: Upgrade
Host: hackecho.com
Sec-WebSocket-Key: uRovscZjNol/umbTt5uKmw==
Upgrade: websocket Sec-WebSocket-Version: 13
</code></pre><p>此时服务端应该返回的信息是：</p>
<pre><code>HTTP/1.    WebSocket Protocol Handshake
Date: Fri,     Feb     17:38:    GMT
Connection: Upgrade
Server: HackEcho Server
Upgrade: WebSocket
Access-Control-Allow-Origin: http://hackecho.com 
Access-Control-Allow-Credentials: true
Sec-WebSocket-Accept: rLHCkw/SKsO9GAH/ZSFhBATDKrU=
Access-Control-Allow-Headers: content-type
</code></pre><p>一旦握手成功建立连接，数据便可以通过WebSocket在服务器和客户端之间进行传送了。</p>
<h3 id="websocket-">WebSocket事件</h3>
<p><a href="/images/2012/04/events-500x250.jpg"><img src="/images/2012/04/events-500x250.jpg" alt=""></a></p>
<p>客户端在握手成功后，会触发WebSocket对象的onopen事件，告诉客户端连接已经成功建立了。</p>
<p>客户端的WebSocket对象一共绑定了四个事件：</p>
<p>1、onopen：连接建立时触发；</p>
<p>2、onmessage：收到服务端消息时触发；</p>
<p>3、onerror：连接出错时触发；</p>
<p>4、onclose：连接关闭时触发；</p>
<h3 id="-">客户端连接的建立</h3>
<p>这里提供一个例子来更好地理解客户端是怎样建立WebSocket连接的。例子来自于文末参考资料的第一篇文章。</p>
<p>将下列代码保存为一个html文件，如websocket.html，在浏览器中打开。页面会自动向服务器（由<a href="http://www.websocket.org提供）连接，发送一个消息并将返回的结果显示出来，最后断开连接。" target="_blank">http://www.websocket.org提供）连接，发送一个消息并将返回的结果显示出来，最后断开连接。</a></p>
<p>通过其中的JavaScript代码即可看出用JS在本地建立连接的所有过程，比较简单，不再赘述，请大家看代码。</p>
<p>（不知怎么回事，如果去掉行号的代码缩进会乱掉，所以只能带上行号... 网上有很多去行号方法，大家可以Google之。）</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;meta charset=&quot;utf-8&quot; /&gt;
&lt;title&gt;
    WebSocket Test
&lt;/title&gt;
&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot;&gt;
    var wsUri = &quot;ws://echo.websocket.org/&quot;;
    var output;
    function init() {
        output = document.getElementById(&quot;output&quot;);
        testWebSocket();
    }
    function testWebSocket() {
        websocket = new WebSocket(wsUri);
        websocket.onopen = function(evt) {
            onOpen(evt)
        };
        websocket.onclose = function(evt) {
            onClose(evt)
        };
        websocket.onmessage = function(evt) {
            onMessage(evt)
        };
        websocket.onerror = function(evt) {
            onError(evt)
        };
    }
    function onOpen(evt) {
        writeToScreen(&quot;CONNECTED&quot;);
        doSend(&quot;WebSocket rocks&quot;);
    }
    function onClose(evt) {
        writeToScreen(&quot;DISCONNECTED&quot;);
    }
    function onMessage(evt) {
        writeToScreen(&#39;&lt;span style=&quot;color: blue;&quot;&gt;RESPONSE: &#39; + evt.data + &#39;&lt;/span&gt;&#39;);
        websocket.close();
    }
    function onError(evt) {
        writeToScreen(&#39;&lt;span style=&quot;color: red;&quot;&gt;ERROR:&lt;/span&gt; &#39; + evt.data);
    }
    function doSend(message) {
        writeToScreen(&quot;SENT: &quot; + message);
        websocket.send(message);
    }
    function writeToScreen(message) {
        var pre = document.createElement(&quot;p&quot;);
        pre.style.wordWrap = &quot;break-word&quot;;
        pre.innerHTML = message;
        output.appendChild(pre);
    }
    window.addEventListener(&quot;load&quot;, init, false);
&lt;/script&gt;
&lt;h2&gt;
    WebSocket Test
&lt;/h2&gt;
&lt;div id=&quot;output&quot;&gt;
&lt;/div&gt;

&lt;/html&gt;
</code></pre><h3 id="-">服务器端的实现</h3>
<p>在将WebSocket应用到实际中时，我们往往需要自己的服务器来响应各种请求以实现更加丰富的功能。从前面的协议介绍部分来看，实现一个WebSocket服务器端并不难。但本着“不重复制造轮子”的原则，我们将基于开源的<a href="http://code.google.com/p/phpwebsocket/" target="_blank">PHPWebSocket Project</a>来二次开发自己的服务器。PHPWebSocket Project中已实现握手协议部分，其它的功能将可以由我们自由添加。这里只讨论握手协议部分和一个简单的响应函数。</p>
<p>将下列代码保存为server.php文件：</p>
<pre><code>&lt;?php
error_reporting(E_ALL);
set_time_limit(0);
ob_implicit_flush();

$master  = WebSocket(&quot;localhost&quot;,12345);
$sockets = array($master);
$users   = array();
$debug   = false;

while(true){
    $changed = $sockets;
    socket_select($changed,$write=NULL,$except=NULL,NULL);
    foreach($changed as $socket){
        if($socket==$master){
            $client=socket_accept($master);
            if($client&lt;0){ console(&quot;socket_accept() failed&quot;); continue; }
            else{ connect($client); }
        }
        else{
            $bytes = @socket_recv($socket,$buffer,2048,0);
            if($bytes==0){ disconnect($socket); }
            else{
                $user = getuserbysocket($socket);
                if(!$user-&gt;handshake){ dohandshake($user,$buffer); }
                else{ process($user,$buffer); }
            }
        }
    }
}

//---------------------------------------------------------------
function process($user,$msg){
    $action = unwrap($msg);
    say(&quot;&lt; &quot;.$action);
    send($user-&gt;socket,&quot;lzy &quot;.$action);
}

function send($client,$msg){
    say(&quot;&gt; &quot;.$msg);
    $msg = wrap($msg);
    socket_write($client,$msg,strlen($msg));
}

function WebSocket($address,$port){
    $master=socket_create(AF_INET, SOCK_STREAM, SOL_TCP)     or die(&quot;socket_create() failed&quot;);
    socket_set_option($master, SOL_SOCKET, SO_REUSEADDR, 1)  or die(&quot;socket_option() failed&quot;);
    socket_bind($master, $address, $port)                    or die(&quot;socket_bind() failed&quot;);
    socket_listen($master,20)                                or die(&quot;socket_listen() failed&quot;);
    echo &quot;Server Started : &quot;.date(&#39;Y-m-d H:i:s&#39;).&quot;\n&quot;;
    echo &quot;Master socket  : &quot;.$master.&quot;\n&quot;;
    echo &quot;Listening on   : &quot;.$address.&quot; port &quot;.$port.&quot;\n\n&quot;;
    return $master;
}

function connect($socket){
    global $sockets,$users;
    $user = new User();
    $user-&gt;id = uniqid();
    $user-&gt;socket = $socket;
    array_push($users,$user);
    array_push($sockets,$socket);
    console($socket.&quot; CONNECTED!&quot;);
}

function disconnect($socket){
    global $sockets,$users;
    $found=null;
    $n=count($users);
    for($i=0;$i&lt;$n;$i++){
        if($users[$i]-&gt;socket==$socket){ $found=$i; break; }
    }
    if(!is_null($found)){ array_splice($users,$found,1); }
    $index = array_search($socket,$sockets);
    socket_close($socket);
    console($socket.&quot; DISCONNECTED!&quot;);
    if($index&gt;=0){ array_splice($sockets,$index,1); }
}

function dohandshake($user,$buffer){
    console(&quot;\nRequesting handshake...&quot;);
    console($buffer);
    list($resource,$host,$origin,$strkey1,$strkey2,$data) = getheaders($buffer);
    console(&quot;Handshaking...&quot;);

    $pattern = &#39;/[^\d]*/&#39;;
    $replacement = &#39;&#39;;
    $numkey= preg_replace($pattern, $replacement, $strkey1);
    $numkey= preg_replace($pattern, $replacement, $strkey2);

    $pattern = &#39;/[^ ]*/&#39;;
    $replacement = &#39;&#39;;
    $spaces= strlen(preg_replace($pattern, $replacement, $strkey1));
    $spaces= strlen(preg_replace($pattern, $replacement, $strkey2));

    if ($spaces== || $spaces== || $numkey% $spaces!= || $numkey% $spaces!= 0) {
        socket_close($user-&gt;socket);
        console(&#39;failed&#39;);
        return false;
    }

    $ctx = hash_init(&#39;md5&#39;);
    hash_update($ctx, pack(&quot;N&quot;, $numkey1/$spaces1));
    hash_update($ctx, pack(&quot;N&quot;, $numkey2/$spaces2));
    hash_update($ctx, $data);
    $hash_data = hash_final($ctx,true);

    $upgrade  = &quot;HTTP/1.WebSocket Protocol Handshake\r\n&quot; .
    &quot;Upgrade: WebSocket\r\n&quot; .
    &quot;Connection: Upgrade\r\n&quot; .
    &quot;Sec-WebSocket-Origin: &quot; . $origin . &quot;\r\n&quot; .
    &quot;Sec-WebSocket-Location: ws://&quot; . $host . $resource . &quot;\r\n&quot; .
    &quot;\r\n&quot; .
    $hash_data;

    socket_write($user-&gt;socket,$upgrade.chr(0),strlen($upgrade.chr(0)));
    $user-&gt;handshake=true;
    console($upgrade);
    console(&quot;Done handshaking...&quot;);
    return true;
}

function getheaders($req){
    $r=$h=$o=null;
    if(preg_match(&quot;/GET (.*) HTTP/&quot;   ,$req,$match)){ $r=$match[1]; }
    if(preg_match(&quot;/Host: (.*)\r\n/&quot;  ,$req,$match)){ $h=$match[1]; }
    if(preg_match(&quot;/Origin: (.*)\r\n/&quot;,$req,$match)){ $o=$match[1]; }
    if(preg_match(&quot;/Sec-WebSocket-Key2: (.*)\r\n/&quot;,$req,$match)){ $key2=$match[1]; }
    if(preg_match(&quot;/Sec-WebSocket-Key1: (.*)\r\n/&quot;,$req,$match)){ $key1=$match[1]; }
    if(preg_match(&quot;/\r\n(.*?)\$/&quot;,$req,$match)){ $data=$match[1]; }
    return array($r,$h,$o,$key1,$key2,$data);
}

function getuserbysocket($socket){
    global $users;
    $found=null;
    foreach($users as $user){
        if($user-&gt;socket==$socket){ $found=$user; break; }
    }
    return $found;
}

function     say($msg=&quot;&quot;){ echo $msg.&quot;\n&quot;; }
function    wrap($msg=&quot;&quot;){ return chr(0).$msg.chr(255); }
function  unwrap($msg=&quot;&quot;){ return substr($msg,1,strlen($msg)-2); }
function console($msg=&quot;&quot;){ global $debug; if($debug){ echo $msg.&quot;\n&quot;; } }

class User{
    var $id;
    var $socket;
    var $handshake;
}

?&gt;
</code></pre><p>运行php server.php命令启动服务器，这时服务器启动。</p>
<p>然后我们将下列代码保存为client.html文件：</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;WebSocket&lt;/title&gt;

&lt;style&gt;
html,body{font:normal 0.9em arial,helvetica;}
#log {width:440px; height:200px; border:1px solid #7F9DB9; overflow:auto;}
#msg {width:330px;}
&lt;/style&gt;

&lt;script&gt;
var socket;

function init(){
    var host = &quot;ws://localhost:12345/websocket/server.php&quot;;
    try{
        socket = new WebSocket(host);
        log(&#39;WebSocket - status &#39;+socket.readyState);
        socket.onopen    = function(msg){ log(&quot;Welcome - status &quot;+this.readyState); };
        socket.onmessage = function(msg){ log(&quot;Received: &quot;+msg.data); };
        socket.onclose   = function(msg){ log(&quot;Disconnected - status &quot;+this.readyState); };
    }
    catch(ex){ log(ex); }
    $(&quot;msg&quot;).focus();
}

function send(){
    var txt,msg;
    txt = $(&quot;msg&quot;);
    msg = txt.value;
    if(!msg){ alert(&quot;Message can not be empty&quot;); return; }
    txt.value=&quot;&quot;;
    txt.focus();
    try{ socket.send(msg); log(&#39;Sent: &#39;+msg); } catch(ex){ log(ex); }
}
function quit(){
    log(&quot;Goodbye!&quot;);
    socket.close();
    socket=null;
}

// Utilities
function $(id){ return document.getElementById(id); }
function log(msg){ $(&quot;log&quot;).innerHTML+=&quot;&lt;br&gt;&quot;+msg; }
function onkey(event){ if(event.keyCode==13){ send(); } }
&lt;/script&gt;

&lt;/head&gt;
&lt;body onload=&quot;init()&quot;&gt;
&lt;h3&gt;WebSocket v2.00&lt;/h3&gt;
&lt;div id=&quot;log&quot;&gt;&lt;/div&gt;
&lt;input id=&quot;msg&quot; type=&quot;textbox&quot; onkeypress=&quot;onkey(event)&quot;/&gt;
&lt;button onclick=&quot;send()&quot;&gt;Send&lt;/button&gt;
&lt;button onclick=&quot;quit()&quot;&gt;Quit&lt;/button&gt;
&lt;div&gt;Commands: hello, hi, name, age, date, time, thanks, bye&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>这时在浏览器中打开client.html，即可实现一个简单的通过WebSocket连接到本地服务器然后发送消息、响应消息的应用。</p>
<p>有兴趣的读者可以继续阅读以下参考资料：</p>
<h3 id="-">参考资料：</h3>
<p><a href="http://www.websocket.org/echo.html" target="_blank">《WebSocket Echo Test》</a></p>
<p><a href="http://www.zendstudio.net/archives/websocket-protocol/" target="_blank">《websocket 通信协议》</a></p>
<p><a href="http://blog.bingo929.com/html5-websockets.html" target="_blank">《HTML5 WebSockets 基础使用教程》</a></p>
<p><a href="http://zh.wikipedia.org/zh-cn/WebSocket" target="_blank">《WikiPedia WebSocket》</a></p>

      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/WebSocket,HTML5/">WebSocket,HTML5</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>

  
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:hackecho.com">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/2014/04/hadoop-cluster-setup-instruction-with-fedora-20/">Hadoop Cluster Setup Instruction with Fedora 20</a>
      </li>
    
      <li>
        <a href="/2013/10/real-time-emotion-analysis-on-twitter/">Real-time Emotion Analysis On Twitter</a>
      </li>
    
      <li>
        <a href="/2013/04/cuda-parallel-reduction/">CUDA中并行规约（Parallel Reduction）的优化</a>
      </li>
    
      <li>
        <a href="/2013/04/basics-of-mpi/">MPI 并行程序设计基础</a>
      </li>
    
      <li>
        <a href="/2013/03/a-letter-to-myself/">写给四年前刚开始编程的自己</a>
      </li>
    
  </ul>
</div>


  <div class="widget tag">
<h3 class="title">Links</h3>
<ul class="entry">
	<li><a href="http://vicdory.com/" target="_blank" title="Kailun Shi">Kailun Shi</a></li>
	<li><a href="http://guo-min-zhi.github.io/" target="_blank" title="远方">远方</a></li>
	<li><a href="http://mingplusplus.com/blog/" target="_blank" title="Ming++">Ming++</a></li>
	<li><a href="http://ruiwu.me/" target="_blank" title="RuiWu">RuiWu</a></li>
</ul>
</div>

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/Android/">Android</a><small>1</small></li>
  
    <li><a href="/tags/Android,AsyncTask/">Android,AsyncTask</a><small>1</small></li>
  
    <li><a href="/tags/Android,SharedPreferences/">Android,SharedPreferences</a><small>1</small></li>
  
    <li><a href="/tags/BidData/">BidData</a><small>1</small></li>
  
    <li><a href="/tags/Decorator,Python/">Decorator,Python</a><small>1</small></li>
  
    <li><a href="/tags/GBK,Mac,UTF8/">GBK,Mac,UTF8</a><small>1</small></li>
  
    <li><a href="/tags/Git/">Git</a><small>1</small></li>
  
    <li><a href="/tags/Google+/">Google+</a><small>1</small></li>
  
    <li><a href="/tags/Hadoop/">Hadoop</a><small>1</small></li>
  
    <li><a href="/tags/JSON,XML,PHP/">JSON,XML,PHP</a><small>1</small></li>
  
    <li><a href="/tags/Life/">Life</a><small>1</small></li>
  
    <li><a href="/tags/Linux,HFS/">Linux,HFS</a><small>1</small></li>
  
    <li><a href="/tags/MPI/">MPI</a><small>1</small></li>
  
    <li><a href="/tags/MVC, PHP/">MVC, PHP</a><small>1</small></li>
  
    <li><a href="/tags/PHP,Socket/">PHP,Socket</a><small>1</small></li>
  
    <li><a href="/tags/Python/">Python</a><small>1</small></li>
  
    <li><a href="/tags/ThinkPHP/">ThinkPHP</a><small>1</small></li>
  
    <li><a href="/tags/WebSocket,HTML5/">WebSocket,HTML5</a><small>1</small></li>
  
    <li><a href="/tags/Wordpress/">Wordpress</a><small>2</small></li>
  
    <li><a href="/tags/boost,thread/">boost,thread</a><small>1</small></li>
  
    <li><a href="/tags/cuda,parallel,reduction/">cuda,parallel,reduction</a><small>1</small></li>
  
    <li><a href="/tags/fly-of-promgrammer/">fly-of-promgrammer</a><small>1</small></li>
  
    <li><a href="/tags/gcc/">gcc</a><small>1</small></li>
  
    <li><a href="/tags/ipc,semaphores/">ipc,semaphores</a><small>1</small></li>
  
    <li><a href="/tags/life/">life</a><small>1</small></li>
  
    <li><a href="/tags/makefile/">makefile</a><small>1</small></li>
  
    <li><a href="/tags/movie/">movie</a><small>1</small></li>
  
    <li><a href="/tags/open source/">open source</a><small>1</small></li>
  
    <li><a href="/tags/pthread/">pthread</a><small>1</small></li>
  
    <li><a href="/tags/web/">web</a><small>1</small></li>
  
    <li><a href="/tags/websocket/">websocket</a><small>1</small></li>
  
    <li><a href="/tags/极客/">极客</a><small>1</small></li>
  
    <li><a href="/tags/程序员/">程序员</a><small>2</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2014 Zhaoyu Li
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'zlmoment';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<!-- InstantClick makes following links in your website instant. http://instantclick.io -->
<script src="/js/instantclick.min.js" data-no-instant></script>
<script data-no-instant>InstantClick.init();</script>
</body>
</html>